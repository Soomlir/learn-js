# JSON - Самый популярный формат обмена данными между приложениями

JSON (JavaScript Object Notation) — это легкий формат обмена данными, основанный на текстовом представлении объектов JavaScript. Он используется для передачи данных между сервером и клиентом (например, в веб-приложениях) и является популярным стандартом для сериализации структур данных.

* Объекты легко трансформируются в JSON для отправки на сервер
* Ключом может быть только строка, обёрнутая в двойные кавычки
* JSON не поддерживает комментарии, JavaScript-комментарий // комментарий приведёт к ошибке
* Альтернативные форматы передачи данных — XML и YAML

Основные правила форматирования JSON:

1. Корневой элемент:
    * Корневой элемент может быть объектом или массивом.
    * Объект в JSON всегда представляет собой пары "ключ-значение", где ключи — это строки в двойных кавычках, а значения могут быть любого типа (строка, число, массив, объект, булевое значение или null).
    * Массив в JSON представляет собой упорядоченную коллекцию значений, заключенную в квадратные скобки [].

2. Строки:
    * Все строки в JSON должны быть заключены в двойные кавычки (не одинарные).
    Это важное отличие от JavaScript, где можно использовать одинарные кавычки для строк.

3. Запятые:
    * Запятая не должна стоять после последнего элемента в объекте или массиве. То есть после последнего значения в объекте или массиве не ставится запятая.

4. Типы данных:
    * JSON поддерживает следующие типы данных:
        - Строки (в двойных кавычках).
        - Числа (целые или с плавающей точкой).
        - Объекты (наборы пар "ключ-значение").
        - Массивы (упорядоченные коллекции значений).
        - Булевы значения (true или false).
        - null (отсутствие значения).

5. Пробелы и форматирование:
    * Пробелы, табуляции и переносы строк не влияют на данные, но их можно использовать для улучшения читаемости.
    * JSON может быть сжатым (одна строка) или отформатированным для удобства чтения.

## Пример JSON:
```json
{
  "name": "John",
  "age": 30,
  "isStudent": false,
  "courses": ["Math", "Science"],
  "address": {
    "street": "123 Main St",
    "city": "New York"
  }
}
```

## Как работать с JSON в JavaScript/TypeScript:

1. Получение JSON:
    * Чтобы получить JSON, например, с сервера, можно использовать fetch() или XMLHttpRequest (в более старых приложениях).

### Пример с fetch:
```js
fetch('https://api.example.com/data')
  .then(response => response.json())  // Преобразует ответ в JSON
  .then(data => console.log(data))    // Обрабатываем полученные данные
  .catch(error => console.error(error));
```
### Парсинг и сериализация:

`Парсинг` — это процесс преобразования строки в формате JSON в объект JavaScript.

Для парсинга используется метод `JSON.parse()`:
```js
const jsonString = '{"name":"John","age":30}';
const obj = JSON.parse(jsonString);  // Преобразуем строку в объект
console.log(obj.name);  // Выведет "John"
```
`Сериализация` — это процесс преобразования объекта в строку JSON.

Для сериализации используется метод `JSON.stringify()`:
```js
const obj = { name: "John", age: 30 };
const jsonString = JSON.stringify(obj);  // Преобразуем объект в строку
console.log(jsonString);  // Выведет '{"name":"John","age":30}'
```

### Термины:
`Парсить` — это процесс преобразования строки в формат JSON или в объект. В JavaScript для этого используется метод `JSON.parse()`.
`Распарсить` — это просто разговорный синоним парсинга.
`Сериализация` — процесс преобразования объекта или данных в строку JSON. Для этого используется метод `JSON.stringify()`.

### Ошибки при работе с JSON:

* Неправильное использование кавычек (например, одинарные вместо двойных).
* Ошибки в структуре, такие как лишние или отсутствующие запятые.
* Некорректные или отсутствующие значения в ключах.

### Ограничения JSON
Формат JSON (JavaScript Object Notation) имеет определённые ограничения по типам данных, которые он поддерживает. Он не поддерживает следующие типы:

1. `Методы (функции)`: В JSON нельзя передавать функции или методы. Например, если вы попытаетесь сериализовать объект, который содержит функцию, она будет проигнорирована.

2. `undefined`: Значение undefined не может быть сериализовано в JSON. Если оно встречается в объекте, то оно будет проигнорировано при сериализации (для массивов — заменится на null).

3. `BigInt`: Тип BigInt, предназначенный для работы с числами произвольной точности, не поддерживается в JSON. Это значит, что любые числа типа BigInt не могут быть корректно сериализованы.

4. `Symbol`: Символы (Symbol) также не поддерживаются в JSON и будут проигнорированы при сериализации.

Пример, который не будет корректно сериализоваться в JSON:
```js
const obj = {
  name: "John",
  age: 30,
  greet: function() { return "Hello!"; },
  bigNum: BigInt(123456789012345678901234567890),
  uniqueSymbol: Symbol('id'),
  notDefined: undefined
};

const jsonString = JSON.stringify(obj);
console.log(jsonString); // Выведет: {"name":"John","age":30}
```
Как видите, при сериализации в JSON будет проигнорирована функция greet, значение BigInt, Symbol и undefined.

### Способ использования
1. Отправляем запрос на сервер;
2. Ждём ответ;
3. Получаем JSON с набором данных;
4. Превращаем JSON в объект JavaScript;
5. Используем данные.

Теперь, если вы столкнётесь с данными в формате JSON, вы будете знать, как их корректно обрабатывать в JavaScript или TypeScript!
